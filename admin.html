<!DOCTYPE html>
<html lang="en" data-role="admin">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlogKing Admin Dashboard</title>
    <link rel="stylesheet" href="styles/dashboard.css">
    <link rel="stylesheet" href="styles/dashboard-page.css">
</head>
<body>
    <nav class="main-nav" aria-label="Main Navigation">
        <div class="nav-brand">BlogKing</div>
        <div class="nav-links" role="navigation" aria-label="Dashboard Navigation">
            <a href="admin.html" class="active" tabindex="0">Dashboard</a>
            <a href="users.html" tabindex="0">Users</a>
            <a href="batches.html" tabindex="0">Batches</a>
            <a href="posts.html" tabindex="0">Posts</a>
            <a href="uploads.html" tabindex="0">Uploads</a>
        </div>
        <div class="auth-section">
            <img id="userAvatar" class="user-avatar" src="images/default-avatar.png" alt="User avatar">
            <span id="userEmail"></span>
            <button id="logoutBtn" class="btn-logout" aria-label="Logout">Logout</button>
        </div>
    </nav>

    <div class="login-required" style="display: none;">
        Please log in to access this content
    </div>

    <div class="dashboard-content admin-only">
        <h1>BlogKing Admin Dashboard</h1>
        <p>Track platform analytics, moderate content, and manage users, batches, posts, and uploads.</p>
        
        <div class="dashboard-grid">
            <div class="dashboard-card" id="userStats"></div>
            <div class="dashboard-card" id="batchStats"></div>
            <div class="dashboard-card" id="postStats"></div>
            <div class="dashboard-card" id="uploadStats"></div>
        </div>
    </div>

    <div class="admin-only batch-chart" id="batchChart">
        <h2>Batch-wise Activity</h2>
        <canvas id="activityChart"></canvas>
    </div>

    <!-- Recent Messages (admin-only) -->
    <div class="admin-only" id="recentMessages" style="margin:2rem 0;">
        <h2>Recent Messages</h2>
        <ul id="recentMsgList"></ul>
    </div>

    <!-- File Upload Logs (admin-only) -->
    <div class="admin-only" id="fileLogs" style="margin:2rem 0;">
        <h2>File Upload Logs</h2>
        <ul id="fileLogList"></ul>
    </div>

    <!-- Export Data (admin-only) -->
    <div class="admin-only" style="margin:2rem 0;">
        <button id="exportCsvBtn">Export All Data as CSV</button>
    </div>

    <!-- User Management (admin-only) -->
    <div class="admin-only" id="userManagement" style="margin:2rem 0;">
        <h2>User Management</h2>
        <input id="userTableSearch" type="text" placeholder="Search users..." style="margin-bottom:8px;">
        <table id="userTable">
            <thead>
                <tr>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Batch</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Populated by JS -->
            </tbody>
        </table>
        <div id="userTablePagination" style="margin-top:8px;"></div>
    </div>

    <!-- Batch Management (admin-only) -->
    <div class="admin-only" id="batchManagement" style="margin:2rem 0;">
        <h2>Batch Management</h2>
        <input id="batchTableSearch" type="text" placeholder="Search batches..." style="margin-bottom:8px;">
        <table id="batchTable">
            <thead>
                <tr>
                    <th>Batch Name</th>
                    <th>Members</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Populated by JS -->
            </tbody>
        </table>
        <div id="batchTablePagination" style="margin-top:8px;"></div>
    </div>

    <!-- Post Moderation (admin-only) -->
    <div class="admin-only" id="postModeration" style="margin:2rem 0;">
        <h2>Post Moderation</h2>
        <input id="postTableSearch" type="text" placeholder="Search posts..." style="margin-bottom:8px;">
        <table id="postTable">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Batch</th>
                    <th>Content</th>
                    <th>DateTime</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Populated by JS -->
            </tbody>
        </table>
        <div id="postTablePagination" style="margin-top:8px;"></div>
    </div>

    <!-- Upload Management (admin-only) -->
    <div class="admin-only" id="uploadManagement" style="margin:2rem 0;">
        <h2>Upload Management</h2>
        <input id="uploadTableSearch" type="text" placeholder="Search uploads..." style="margin-bottom:8px;">
        <table id="uploadTable">
            <thead>
                <tr>
                    <th>User</th>
                    <th>File</th>
                    <th>Size</th>
                    <th>DateTime</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Populated by JS -->
            </tbody>
        </table>
        <div id="uploadTablePagination" style="margin-top:8px;"></div>
    </div>

    <div id="error"></div>
    <table id="dataTable">
        <thead>
            <tr id="headerRow"></tr>
        </thead>
        <tbody id="dataBody"></tbody>
    </table>
    <div class="stats" id="stats"></div>

    <script src="js/dashboard.js"></script>
    <script src="js/dashboard-page.js"></script>
</body>
</html>

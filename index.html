<!DOCTYPE html>
<html lang="en" data-role="guest">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlogKing User Dashboard</title>
    <link rel="stylesheet" href="styles/dashboard.css">
    <link rel="stylesheet" href="styles/dashboard-page.css">
</head>
<body>
    <nav class="main-nav" aria-label="Main Navigation">
        <div class="nav-brand">BlogKing</div>
        <div class="nav-links" role="navigation" aria-label="Dashboard Navigation">
            <a href="index.html" class="active" tabindex="0">Dashboard</a>
            <a href="users.html" tabindex="0">Users</a>
            <a href="batches.html" tabindex="0">Batches</a>
            <a href="posts.html" tabindex="0">Posts</a>
            <a href="uploads.html" tabindex="0">Uploads</a>
        </div>
        <div class="auth-section">
            <img id="userAvatar" class="user-avatar" src="images/default-avatar.png" alt="User avatar">
            <span id="userEmail"></span>
            <button id="logoutBtn" class="btn-logout" aria-label="Logout">Logout</button>
        </div>
    </nav>

    <div class="login-required" style="display: none;">
        Please log in to access this content
    </div>

    <!-- Login Form (hidden if logged in) -->
    <div id="loginForm" style="display:none; max-width:400px; margin:2rem auto;" aria-label="Login Form">
        <h2>Login</h2>
        <form>
            <label for="loginEmail">Email or Username<br>
                <input type="text" id="loginEmail" required aria-required="true" aria-label="Email or Username">
            </label><br><br>
            <label for="loginPassword">Password<br>
                <input type="password" id="loginPassword" required aria-required="true" aria-label="Password">
            </label><br><br>
            <button type="button" id="loginBtn" aria-label="Login">Login</button>
        </form>
        <div id="loginError" style="color:red;"></div>
    </div>

    <div class="dashboard-content user-only" style="display:none;">
        <h1>BlogKing User Dashboard</h1>
        <p>Track your activity, posts, and batch progress across the platform.</p>
        
        <div class="dashboard-grid">
            <div class="dashboard-card" id="userStats"></div>
            <div class="dashboard-card" id="batchStats"></div>
            <div class="dashboard-card" id="postStats"></div>
            <div class="dashboard-card" id="uploadStats"></div>
        </div>

        <!-- Join Batch -->
        <div style="margin:2rem 0;">
            <label for="batchSelect"><strong>Join a Batch:</strong></label>
            <select id="batchSelect" aria-label="Batch Selection">
                <option value="">Select Batch</option>
                <!-- Batch options populated by JS -->
            </select>
            <button id="joinBatchBtn" aria-label="Join Batch">Join</button>
            <span id="batchJoinMsg" style="margin-left:1rem;color:green;"></span>
        </div>

        <!-- Post a Message -->
        <div style="margin:2rem 0;">
            <h3>Post a Message</h3>
            <textarea id="messageInput" maxlength="500" rows="3" style="width:100%;" aria-label="Message Input"></textarea><br>
            <button id="postMsgBtn" aria-label="Post Message">Post</button>
            <span id="msgPostStatus" style="margin-left:1rem;color:green;"></span>
        </div>

        <!-- File Upload -->
        <div style="margin:2rem 0;">
            <h3>Upload a File</h3>
            <input type="file" id="fileInput" accept=".pdf,.docx,.png,.jpg,.zip" aria-label="File Upload">
            <button id="uploadFileBtn" aria-label="Upload File">Upload</button>
            <span id="fileUploadStatus" style="margin-left:1rem;color:green;"></span>
        </div>
    </div>

    <div id="error"></div>
    <table id="dataTable">
        <thead>
            <tr id="headerRow"></tr>
        </thead>
        <tbody id="dataBody"></tbody>
    </table>
    <div class="stats" id="stats"></div>

    <script src="js/dashboard.js"></script>
</body>
</html>